
   Scenario Outline: Search for a movie using <actors_name>
      Given that I am on the IMDB website
      When I enter <actors_name> in a search field
      And I click the search button
      Then I find the corresponding <actors_name> in the search results

      Examples:
         | actors_name   |
         | "Chevy Chase" |
         | "Niel Breen" |




   Scenario Outline: Search for a movie using <actor_name> with down button and enter key
      Given that I am on the IMDB website
      When I enter <actor_name> in a search field
      And I press down button
      And I press enter
      Then I get a presentation of the actor that contains the text <part_of_presentation>

      Examples:
         | actor_name      | part_of_presentation                                               |
         | "Colin Firth"   | "Colin Andrew Firth was born into an academic family in Grayshott" |
         | "Josh Hartnett" | "Joshua Daniel Hartnett was born in Saint Paul, Minnesota"         |



   Scenario Outline:  Search for a movie or actor with the help of <search_filter>
      Given that I am on the IMDB website
      When I click on search filter button
      And I find different search filters to choose from
      And I click on <search_filters>
      Then I can find an empty search field with corresponding search filter.

      Examples:
         | search_filters |
         | All            |

         | Titles      |
         | TV Episodes |
         | Celebs      |
         | Companies   |
         | Keywords    |

 
 
let {$, sleep} = require('./funcs');
 
module.exports = function() {
   
    this.Given(/^that I am on the IMDB website$/, async function () {
       await helpers.loadPage('https://imdb.com');
       await sleep (1000);
       let logo = await $('#home_img_holder');
       assert(logo, 'Expected the IMDB logo to prove that I am on the IMDB website')
      });
 
 
      this.When(/^I enter "([^"]*)" in a search field$/, async function (movieTitle) {   
        let searchField= await $('#suggestion-search');
        await searchField.sendKeys(movieTitle);
        await sleep(5000)
      });
 
      this.When(/^I click the search button$/, async function () {
        let button = await $('#suggestion-search-button');
        await button.click();
        await sleep(4000);
      });
 
      
      this.Then(/^I find the corresponding "([^"]*)" in the search results$/, async function 
      (searchString) {
          let results = await $ ('h3'); 
 
          let found = false;
          for(let result of results){
            console.log('text', await result.getText())
            let text = await result.getText()
            if( text.toLowerCase().includes( searchString.toLowerCase() ) ){
              found = true
              break
            }
          }
       });
 
       this.When(/^I enter "([^"]*)"  and ”(\d+)” in a search field$/, async function (movieTitle,Year) {
        let searchField= await $('#suggestion-search');
        await searchField.sendKeys(movieTitle);
        await sleep(1000);
        await searchField.sendKeys(Year);
        await sleep(5000);
      });
 
      this.Then(/^I find the corresponding  "([^"]*)"  and ”(\d+)”  in the search results$/, async function (searchString, searchNumber) {
        let results = await $ ('h3'); 
 
        let found = false;
        for(let result of results){
          console.log('text', await result.getText())
          let text = await result.getText()
          if( text.toLowerCase().includes( searchString.toLowerCase() ) ){
            found = true;
            break
          }
        }
      });
}


 





  